<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <title>ì‹ ê³ ëœ ë¬¸ì œ ê´€ë¦¬</title>
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = { theme: { extend: { colors: { main: "#A57A62" } } } };
    </script>
  </head>
  <body class="bg-white text-stone-800">
    <header class="max-w-3xl mx-auto px-4 py-5">
      <div class="flex items-center justify-between">
        <h1 class="text-2xl font-extrabold text-main">ğŸš¨ ì‹ ê³ ëœ ë¬¸ì œ ê´€ë¦¬</h1>
        <a href="/" class="text-main/80 hover:underline text-sm">ì²˜ìŒìœ¼ë¡œ</a>
      </div>
      <p class="px-1 text-stone-500 text-sm mt-1">
        ì‹ ê³ ëœ ë¬¸ì œë“¤ì„ í™•ì¸í•˜ê³  ì¡°ì¹˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
      </p>
    </header>

    <main class="max-w-3xl mx-auto px-4 pb-16 space-y-6">
      {% for q in quizzes %}
      <div
        class="bg-white rounded-2xl shadow p-6 space-y-3 border border-stone-200 hover:shadow-md transition"
        data-id="{{ q._id }}"
      >
        <!-- ë¬¸ì œ ì œëª© -->
        <div class="flex items-center justify-between">
          <h2 class="font-semibold text-lg text-stone-800">
            {{ loop.index }}. {{ q.quiz_sentence }} - {{ q.category }}
          </h2>
          <span
            class="px-3 py-1 text-xs rounded-full bg-red-100 text-red-600 font-medium"
            >ì‹ ê³  {{ q.complaint }}íšŒ</span
          >
        </div>

        <!-- ì½”ë“œ ì˜ì—­ -->
        <pre
          class="bg-stone-200 rounded-md p-4 overflow-auto text-sm text-stone-800"
        ><code>{{ q.quiz_code }}</code></pre>

        <!-- ë²„íŠ¼ -->
        <div class="flex gap-3">
          <button
            onclick="restoreQuiz('{{ q._id }}')"
            class="flex-1 rounded-md bg-white border border-main text-main font-medium px-4 py-2 hover:bg-main/5 transition"
          >
            ë³µêµ¬í•˜ê¸°
          </button>
          <button
            onclick="deleteQuiz('{{ q._id }}')"
            class="flex-1 rounded-md bg-main text-white font-medium px-4 py-2 hover:brightness-95 transition"
          >
            ì˜êµ¬ ì‚­ì œ
          </button>
        </div>
      </div>
      {% endfor %}
    </main>

    <script>
      function deleteQuiz(id) {
        if (!confirm("ì •ë§ë¡œ ì´ ë¬¸ì œë¥¼ ì˜êµ¬ ì‚­ì œí•˜ì‹œê² ìŠµë‹ˆê¹Œ?")) return;
        $.post(`/quiz/delete/${id}`, {}, function (res) {
          alert(res.msg);
          $(`[data-id='${id}']`).remove();
        });
      }

      function restoreQuiz(id) {
        $.post(`/quiz/restore/${id}`, {}, function (res) {
          alert(res.msg);
          $(`[data-id='${id}']`).remove();
        });
      }
    </script>
  </body>
</html>
